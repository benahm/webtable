<!DOCTYPE html>
<html ng-app="myModule">
<link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" rel="stylesheet">
<head>
    <title></title>
</head>
<body>
<nav class="navbar navbar-default" role="navigation">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-4">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">webtable</a>
    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-4">
        <p class="navbar-text">alpha version 0.0.0.2</p>
    </div>
</nav>
<div id="webtable" ng-controller="tableController">
    <div class="commands" ng-controller="commandController">
        <div class="btn-group">
            <button type="button" class="btn dropdown-toggle" data-toggle="dropdown">
                Menu <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <li><a href="#" ng-click="cancelRecord()">Cancel record</a></li>
                <li><a href="#" ng-click="deleteRecord()">Delete record</a></li>
                <li class="divider"></li>
                <li><a href="#" ng-click="newRecord()">New record</a></li>
                <li><a href="#" ng-click="copyRecord()">Copy record</a></li>
                <li><a href="#" ng-click="saveRecord()">Save Record</a></li>
                <li class="divider"></li>
                <li><a href="#" ng-click="queryRecord()">New query</a></li>
                <li><a href="#" ng-click="!query_record||refineQueryRecord()">Refine query</a></li>
                <li class="divider"></li>
                <li><a href="#" ng-click="aboutRecord()">About record</a></li>
                <li><a href="#" ng-click="countRecords()">Count records</a></li>
            </ul>
        </div>
        <button class="btn" ng-click="newRecord()" ng-hide="commands.newRecord()">New</button>
        <button class="btn" ng-click="deleteRecord()" ng-hide="commands.deleteRecord()">Delete</button>
        <button class="btn" ng-click="cancelRecord()" ng-hide="commands.cancelRecord()">Cancel</button>
        <button class="btn" ng-click="saveRecord()" ng-hide="commands.saveRecord()">Save</button>
        <button class="btn" ng-click="queryRecord()" ng-hide="commands.queryRecord()">Query</button>
        <button class="btn" ng-click="executeQueryRecord()" ng-hide="commands.executeQueryRecord()">Execute</button>
        <button class="btn" ng-click="clearQueryRecord()" ng-hide="commands.clearQueryRecord()">Clear</button>

        <div class="modal fade in" ng-class="modal.isVisible">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="false" ng-click="modal.close()" >&times;</button>
                        <h3 class="modal-title"><i class="glyphicon glyphicon-info-sign"></i></h3>
                    </div>
                    <div class="modal-body">
                        {{modal.message}}
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn" data-dismiss="modal" ng-click="modal.close()">Close</button>
                        <button type="button" class="btn" ng-click="modal.ok()">OK</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

    </div>
    <table class="table table-striped table-bordered">
        <thead>
        <tr>
            <th>#</th>
            <th ng-repeat="headElement in datas.head" ng-click="setSelectedColumn($index)">
                    <i class="glyphicon glyphicon-sort" ng-hide="columnNum==$index"></i>
                    <i class="glyphicon glyphicon-chevron-up pull-up" ng-show="!reverseSort&&columnNum==$index"></i>
                    <i class="glyphicon glyphicon-chevron-down " ng-show="reverseSort&&columnNum==$index"></i>
                {{headElement}}</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-show="show_query_record" class="success">
            <td>*</td>
            <td ng-repeat="d in query_record track by $index" ng-init="innerindex=$index">
                <div webtable-cell-nq datacell="d" index="innerindex" nq="query_record"></div>
            </td>
        </tr>
        <tr ng-show="new_record" class="success">
            <td>*</td>
            <td ng-repeat="d in new_record track by $index" ng-init="innerindex=$index">
                <div webtable-cell-nq datacell="d" index="innerindex" nq="new_record"></div>
            </td>
        </tr>
        <tr ng-repeat="(outerindex,data) in datas.body |queryRecord:query_record|orderBy:selectedColumn:reverseSort" ng-class="activeRecord(outerindex)">
            <td ng-click="setSelectedRecord(outerindex)">{{selectedRecord(outerindex)?'*':'-'}}</td>
            <td ng-repeat="d in data track by $index " ng-init="innerindex=$index"  style="width: {{100/datas.head.length}}%" >
                <div webtable-cell datacell="d" innerindex="innerindex" outerindex="outerindex"
                     maxouterindex="datas.head.length"></div>
            </td>
        </tr>
        </tbody>
    </table>


    <ul class="pagination" ng-hide="true" >
        <li><a href="#">&laquo;</a></li>
        <li ng-repeat="i in makeArray(decalePage+datas.info.pgTotal-datas.info.pgNum) track by $index">
            <a href="#" ng-click="getPage($index)">{{$index+decalePage}}</a>
        </li>
        <li><a href="#">&raquo;</a></li>
    </ul>
</div>

<div id="footer">
    <div class="container">
        <p class="text-muted credit">Licence Apache 2.0</p>
    </div>
</div>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://code.angularjs.org/1.2.0-rc.3/angular.min.js"></script>
<script src="../scripts/services/parser.js"></script>
<script src="../scripts/directives/directives.js"></script>
<script src="../scripts/filters/filters.js"></script>
<script src="../scripts/controllers/commandController.js"></script>
<script src="../scripts/controllers/tableContorller.js"></script>
<script src="../scripts/app.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
<script>

    $(document).ready(function () {
        /* var tdWidth = 100/($("#webtable").scope().datas.head.length+1)+"%";
         $(this).find('style').append(".table.fixedWidth >tbody>tr>td{padding: 0; width:"+tdWidth+";}");
         $('body').find('.table').each(function(){$(this).addClass('fixedWidth')});*/
    });
</script>

<style>

    input[type="text"] {
        width: 100%;
        text-align: center;
    }
    .table > tbody > tr > td {
        padding: 0;
        text-align: center;
    }
    .table > thead > tr > th {
        text-align: center;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    .cell{
        height: 25px;
        text-align: center;
    }



</style>
</html>
